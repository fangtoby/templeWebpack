webpackJsonp([1],{0:function(t,e,s){(function(t){function e(){t("#reset-container").removeClass("active"),t("body, html").css("overflow","initial"),setTimeout(function(){t("#reset-container").remove()},300)}var n=s(8),i=s(2),r={};r.config={max:1,maxSize:2097152,zIndex:110};var a=t(".avatar_uploader"),o=new i;new n({trigger:a,action:"/api/member/action/setting",name:"avatar",accept:"image/*",multiple:!0,progress:null}).change(function(t){if(t.length>r.config.max)return void y.msg("亲,全部图片不能超过"+r.config.max+"个!");for(var e=/^.*[^a][^b][^c]\.(?:png|jpg|gif|jpeg)$/g,s=0;s<t.length;s++){var n=t[s];if(n.size>=r.config.maxSize)return o.show({msg:"您上传的图片超过2M，请重新上传",autoClose:!0}),!1;var e=/^.+\.(?:png|jpg|gif|jpeg)$/g;if(!e.test(n.name.toLowerCase()))return o.show({msg:"图像只支持jpg、jpeg、 png、gif哦~",autoClose:!0}),!1}for(var s in t)var i=t[s];a.is("loading")||(a.addClass("loading"),o.show({msg:"图片正在玩命的上传，请稍等..."}),this.submit())}).success(function(e){a.removeClass("loading");var e=t.parseJSON(e);100==e.response?(o.show({msg:"图片上传成功",autoClose:!0}),window.location.href="/mobile/member/action/setting"):o.show({msg:e.message,autoClose:!0})}),t("#set_username").click(function(){return t("body").append('<div id="reset-container"><p class="reset_item set_change_border"><label>昵称：</label><input placeholder="请输入新昵称" id="reset_username_val"></p><p class="error_message"><span>请从新输入昵称</span></p><p class="btn-b"><a id="reset_username" class="reset_confirm" href="#null">确定</a></p><p class="btn-b"><a id="reset_cancel" class="reset_cancel" href="#null">取消</a></p></div>'),setTimeout(function(){t("#reset-container").addClass("active")},10),setTimeout(function(){t("body").scrollTop(0),t("body, html").css("overflow","hidden")},310),t("#reset_cancel").unbind("click"),t("#reset_cancel").click(function(){return e(),!1}),t("#reset_username").unbind("click"),t("#reset_username").click(function(){var s=t.trim(t("#reset_username_val").val());return""==s?(t(".error_message").fadeIn(),!1):(t.ajax({url:"/api/member/action/setting",type:"POST",data:{relname:s},success:function(n){o.show({msg:"昵称修改成功",autoClose:!0}),t("#set_username").find(".i_username_span").html(s),e()},failure:function(t){}}),!1)}),!1}),t("#set_street").click(function(){t("body").append('<div id="reset-container"><div class="street-default"><div class="street_container"><div class="street_loading">正在加载...</div> </div><p class="error_message"><span>请选择街道</span></p></div><p class="btn-b"><a id="reset_street_but" class="reset_confirm" href="#null">确定</a></p><p class="btn-b"><a id="reset_cancel" class="reset_cancel" href="#null">取消</a></p></div>');var s=t(".i_street_name").html();return t.ajax({url:"/api/mobile/street",type:"GET",success:function(e){var n="",i="active";t.each(e.data.list,function(t,e){i="",e.streetname==s&&(i="active"),n+='<div class="street_item street_item_noborder clearfix '+i+'" data-sid="'+e.id+'"><div class="left_street_name">'+e.streetname+'</div><div class="right_but"></div> </div>'}),t(".street_container").addClass("set_change_border").html(n),t(".street_item").click(function(){t(this).hasClass("active")||(t(".street_item").removeClass("active"),t(this).addClass("active"))})},failure:function(t){}}),setTimeout(function(){t("#reset-container").addClass("active")},10),setTimeout(function(){t("body").scrollTop(0),t("body, html").css("overflow","hidden")},310),t("#reset_cancel").unbind("click"),t("#reset_cancel").click(function(){return e(),!1}),t(".street_item").click(function(){t(this).hasClass("active")||(t(".street_item").removeClass("active"),t(this).addClass("active"))}),t("#reset_street_but").unbind("click"),t("#reset_street_but").click(function(){var s=t(".street_item"),n=null,i=null;return s.each(function(){t(this).hasClass("active")&&(n=t(this).data("sid"),i=t(this).find(".left_street_name").html())}),null==n?(t(".error_message").fadeIn(),!1):(t.ajax({url:"/api/member/action/setting",type:"POST",data:{Street_id:n},success:function(s){t("#set_street").find(".i_street_name").html(i),e(),o.show({msg:"社区修改成功",autoClose:!0})},failure:function(t){}}),!1)}),!1}),t("#set_password").click(function(){return t("body").append('<div id="reset-container"><div class="password_container"><p class="password_item"><input placeholder="请输入当前密码" type="password" id="old_password"> </p><p class="password_item"><input placeholder="新密码（6-14字符）" type="password" id="new_password"> </p><p class="password_item"><input placeholder="重新输入新密码" type="password" id="new_password_repeat"> </p></div><p class="error_message"><span></span></p><p class="btn-b"><a id="reset_passwrod_but" class="reset_confirm" href="#null">修改</a></p><p class="btn-b"><a id="reset_cancel" class="reset_cancel" href="#null">取消</a></p></div>'),setTimeout(function(){t("#reset-container").addClass("active")},10),setTimeout(function(){t("body").scrollTop(0),t("body, html").css("overflow","hidden")},310),t("#reset_cancel").unbind("click"),t("#reset_cancel").click(function(){return e(),!1}),t("#reset_passwrod_but").unbind("click"),t("#reset_passwrod_but").click(function(){var s=t.trim(t("#old_password").val()),n=t.trim(t("#new_password").val()),i=t.trim(t("#new_password_repeat").val());return""==s||""==n||""==i?(t(".error_message").find("span").html("请输入完全"),!1):n!=i?(t(".error_message").find("span").html("新密码输入有误，请重新输入"),!1):(t.ajax({url:"/api/member/action/reset",type:"POST",data:{oldpassword:s,password:n,password_confirmation:i},success:function(s){100==s.response?(t("#reset_passwrod_but").html("修改成功"),o.show({msg:"密码修改成功",autoClose:!0}),e()):o.show({msg:s.response,autoClose:!0})},failure:function(t){}}),!1)}),!1})}).call(e,s(1))},8:function(t,e,s){(function(e){function s(t){if(!(this instanceof s))return new s(t);n(t)&&(t={trigger:t});var i={trigger:null,name:null,action:null,data:null,accept:null,change:null,error:null,multiple:!0,success:null};t&&e.extend(i,t);var a=e(i.trigger);i.action=i.action||a.data("action")||"/upload",i.name=i.name||a.attr("name")||a.data("name")||"file",i.data=i.data||r(a.data("data")),i.accept=i.accept||a.data("accept"),i.success=i.success||a.data("success"),this.settings=i,this.setup(),this.bind()}function n(t){return"[object String]"===Object.prototype.toString.call(t)}function i(t){if(!t)return[];var e,s=[];for(var n in t)e=document.createElement("input"),e.type="hidden",e.name=n,e.value=t[n],s.push(e);return s}function r(t){if(!t)return{};for(var e={},s=t.split("&"),n=function(t){return decodeURIComponent(t.replace(/\+/g," "))},i=0;i<s.length;i++){var r=s[i].split("="),a=n(r[0]),o=n(r[1]);e[a]=o}return e}function a(t){for(var e=t.parentsUntil("body"),s=0,n=0;n<e.length;n++){var i=e.eq(n);"static"!==i.css("position")&&(s=parseInt(i.css("zIndex"),10)||s)}return s}function o(){var t="iframe-uploader-"+u,s=e('<iframe name="'+t+'" />').hide();return u+=1,s}function c(t){if(!(this instanceof c))return new c(t);n(t)&&(t={trigger:t});var i=e(t.trigger),r=[];i.each(function(e,n){t.trigger=n,r.push(new s(t))}),this._uploaders=r}var u=0;s.prototype.setup=function(){this.form=e('<form method="post" enctype="multipart/form-data"target="" action="'+this.settings.action+'" />'),this.iframe=o(),this.form.attr("target",this.iframe.attr("name"));var t=this.settings.data;this.form.append(i(t)),window.FormData?this.form.append(i({_uploader_:"formdata"})):this.form.append(i({_uploader_:"iframe"}));var s=document.createElement("input");s.type="file",s.name=this.settings.name,this.settings.accept&&(s.accept=this.settings.accept),this.settings.multiple&&(s.multiple=!0,s.setAttribute("multiple","multiple")),this.input=e(s);var n=e(this.settings.trigger);return this.input.attr("hidefocus",!0).css({position:"absolute",top:0,right:0,opacity:0,outline:0,cursor:"pointer",height:n.outerHeight(),fontSize:Math.max(64,5*n.outerHeight())}),this.form.append(this.input),this.form.css({position:"absolute",top:0,left:0,overflow:"hidden",opacity:0,width:n.outerWidth(),height:n.outerHeight(),zIndex:a(n)+10}).appendTo(n),this},s.prototype.bind=function(){var t=this,s=e(t.settings.trigger);s.mouseenter(function(){t.form.css({top:0,left:0,width:s.outerWidth(),height:s.outerHeight()})}),t.bindInput()},s.prototype.bindInput=function(){var t=this;t.input.change(function(e){t._files=this.files||[{name:e.target.value}];var s=t.input.val();if(t.settings.change)t.settings.change.call(t,t._files);else if(s)return t.submit()})},s.prototype.submit=function(){var t=this;if(window.FormData&&t._files){var s=new FormData(t.form.get(0));s.append(t.settings.name,t._files);var n;if(t.settings.progress){var i=t._files;n=function(){var s=e.ajaxSettings.xhr();return s.upload&&s.upload.addEventListener("progress",function(e){var s=0,n=e.loaded||e.position,r=e.total;e.lengthComputable&&(s=Math.ceil(n/r*100)),t.settings.progress(e,n,r,s,i)},!1),s}}return e.ajax({url:t.settings.action,type:"post",processData:!1,contentType:!1,data:s,dataType:"html",xhr:n,context:this,success:t.settings.success,error:t.settings.error}),this}return t.iframe=o(),t.form.attr("target",t.iframe.attr("name")),e("body").append(t.iframe),t.iframe.one("load",function(){e('<iframe src="javascript:false;"></iframe>').appendTo(t.form).remove();var s=e(this).contents().find("body").html();e(this).remove(),s?t.settings.success&&t.settings.success(s):t.settings.error&&t.settings.error(t.input.val())}),t.form.submit(),this},s.prototype.refreshInput=function(){var t=this.input.clone();this.input.before(t),this.input.off("change"),this.input.remove(),this.input=t,this.bindInput()},s.prototype.change=function(t){return t?(this.settings.change=t,this):this},s.prototype.success=function(t){var e=this;return this.settings.success=function(s){e.refreshInput(),t&&t(s)},this},s.prototype.error=function(t){var e=this;return this.settings.error=function(s){t&&(e.refreshInput(),t(s))},this},s.prototype.enable=function(){this.input.prop("disabled",!1)},s.prototype.disable=function(){this.input.prop("disabled",!0)},c.prototype.submit=function(){return e.each(this._uploaders,function(t,e){e.submit()}),this},c.prototype.change=function(t){return e.each(this._uploaders,function(e,s){s.change(t)}),this},c.prototype.success=function(t){return e.each(this._uploaders,function(e,s){s.success(t)}),this},c.prototype.error=function(t){return e.each(this._uploaders,function(e,s){s.error(t)}),this},c.prototype.enable=function(){return e.each(this._uploaders,function(t,e){e.enable()}),this},c.prototype.disable=function(){return e.each(this._uploaders,function(t,e){e.disable()}),this},c.Uploader=s,t.exports=c}).call(e,s(1))}});