webpackJsonp([3],{0:function(e,t,n){(function(e){n(8);var t=e("#video_frame"),a=t.data("url");t.html("");var o=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidht,i="";/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)&&(i="webkit-playsinline");var s=a.split("."),c={ogg:"",mp4:"",webm:""};s[s.length-1]="ogg",c.ogg=s.join("."),s[s.length-1]="mp4",c.mp4=s.join("."),s[s.length-1]="webm",c.webm=s.join(".");var l='<video width="'+o+'"  controls="controls" id="detail_main_player" '+i+' ><source src="'+c.mp4+'" type="video/mp4"><source src="'+c.ogg+'" type="video/ogg"><source src="'+c.webm+'" type="video/webm">Your browser does not support the video tag.</video>';t.html(l),window.yplayer=document.getElementById("detail_main_player"),e(".tab-item").click(function(){var t=e(this);if(!t.hasClass("active")){var n=t.data("type");e(".tab-item").removeClass("active"),t.addClass("active"),0==n?(e(".lessons-detail").css({display:"block"}),e(".lessons-list").css({display:"none"})):(e(".lessons-detail").css({display:"none"}),e(".lessons-list").css({display:"block"}))}})}).call(t,n(1))},8:function(e,t,n){var a;(function(o){a=function(e){var t=n(3),a=new t,i={};i.url={commentlist:"/api/mobile/comments",set:"/api/member/action/setting"},i.loading='<div id="loading"><span class="scale-point active-1 scalePoint"></span><span class="scale-point active-2 scalePoint"></span><span class="scale-point active-3 scalePoint"></span><span class="pullTxt">努力加载中</span></div>',i.comment={$container:o("#container"),$comment_container:o("#commentlist"),streetTpl:o("#street").html(),nostreetTpl:o("#nostreet").html(),msg:{noselect:"未作选择",empty:"评论不能为空哦~",end:"已加载完毕",more:"点击加载更多",streetempty:"暂无留言,快来留言吧！",out:"您尚未登录，请先登录，三秒后跳转到登陆页"},baseurl:{login:"/mobile/auth/action/login"},page:1,Getdata:function(e,t,n,i){window.ajaxRequest=o.ajax({type:"GET",dataType:"json",url:e,data:t,success:function(e){100==e.response?n&&n(e):(i&&i(e),a.show({msg:e.message,autoClose:!0}))}})},Postdata:function(e,t,n,a){var i=this;window.ajaxRequest=o.ajax({type:"POST",dataType:"json",url:e,data:t,success:function(e){100==e.response?n&&n(e):(a&&a(e),i.alertPop(e.message),106==e.response&&setTimeout(function(){location.pathname=i.baseurl.login},2e3))}})},alertPop:function(e,t){if(o(".pop-alert")[0])o(".pop-alert").html(e);else{o("body").append('<div class="pop-alert">'+e+"</div>");var n=o(".pop-alert");n.css({"margin-left":-n.outerWidth()/2,bottom:"50%","margin-bottom":-n.outerHeight()/2}),setTimeout(function(){n.remove()},t||3e3)}},render:function(e,t,n){var a=this;1==n&&a.$comment_container.html("<li>"+i.loading+"</li>"),a.Getdata(i.url.commentlist,{relationId:e,type:t,page:n},function(e){var t=e.data.list,e=t.data,i=e.length,s="",c=Math.ceil(t.total/t.per_page);if(1==n&&a.$comment_container.html(""),1==n&&0==i)s='<div class="empty"><em class="icon icon-empty"></em><p class="txt">'+a.msg.streetempty+"</p></div>";else if(i>0){for(var l=0;l<i;l++)s+='<li class="it"><p class="title"><span>'+e[l].member.relname+"</span><span>"+e[l].createdAt+'</span></p><p class="content">'+e[l].content+"</p></li>";s+='<li class="tips"><a id="more" href="javascript:void(0)">'+(n==c?a.msg.end:a.msg.more)+"</a></li>"}else s+='<li class="tips">'+a.msg.end+"</li>";o("#more").parent().remove(),a.$comment_container.append(s)})},comment:function(){var e=this;document.getElementById("comment-btn").addEventListener("touchstart",function(){if(g_param.memberId){var t="";document.getElementById("comment-container")?t=o("#comment-container"):(o("body").append('<div id="comment-container"><p><textarea placeholder="期待更多有趣内容，请留下您的建议..."></textarea></p><p class="btn-b"><a id="comment-confirm" href="javascript:void(0)">确定</a></p><p class="btn-b"><a id="comment-close" href="javascript:void(0)">取消</a></p></div>'),t=o("#comment-container"),t.css("top",o("#video_frame").height()),document.getElementById("comment-confirm").addEventListener("touchstart",function(){var n=o.trim(o("#comment-container").find("textarea").val());n?e.Postdata(i.url.commentlist,{relationId:g_param.relationId,content:n,type:g_param.type},function(){o("body, html").css("overflow","initial"),e.page=1,e.render(g_param.relationId,g_param.type,e.page),t.removeClass("active"),t.find("textarea").val("")}):a.show({msg:e.msg.empty,autoClose:!0})}),document.getElementById("comment-close").addEventListener("touchstart",function(){t.removeClass("active"),o("body, html").css("overflow","initial")})),setTimeout(function(){t.addClass("active")},10),setTimeout(function(){o("body").scrollTop(0),o("body, html").css("overflow","hidden")},310)}else a.show({msg:e.msg.out}),setTimeout(function(){location.pathname=e.baseurl.login},3e3)})},init:function(){var e=this;e.render(g_param.relationId,g_param.type,1),e.comment(),o(document).on("click","#confirm",function(){var t=!1,n="";o("#comment-layer").find("li").each(function(){var e=o(this),a=e.find("input");if(a.is(":checked"))return t=!0,n=e.attr("id"),!1}),t?"no"==n?(i.hidePop(),o("body").css("overflow","auto")):e.Getdata(i.url.set,{Street_id:n},function(){e.street()}):a.show({msg:e.msg.noselect,autoClose:!0})}).on("click","#more",function(){e.page++,o(this).html(i.loading),e.render(g_param.relationId,g_param.type,e.page)})}},i.comment.init()}.call(t,n,t,e),!(void 0!==a&&(e.exports=a))}).call(t,n(1))}});